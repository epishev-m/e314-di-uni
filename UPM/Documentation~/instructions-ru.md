# E314.DiUni

## Описание

Модуль `E314.DiUni` предоставляет базовую функциональность для организации внедрения зависимостей через систему контекстов в Unity.
В настоящее время реализована система контекстов, в будущем планируется добавление новых модулей для расширения функциональности.

## Содержание

- [E314.DiUni](#e314diuni)
  - [Описание](#описание)
  - [Содержание](#содержание)
  - [Context](#context)
    - [RootContext](#rootcontext)
    - [SceneContext](#scenecontext)
    - [Пользовательские реализации](#пользовательские-реализации)
    - [Конфигурация в Unity](#конфигурация-в-unity)

## Context

`Context` - это абстрактный базовый класс для контекста внедрения зависимостей.
Он предоставляет основную функциональность для настройки и управления контейнером зависимостей:

- `Bind(IDiContainer container)` - определяет привязки для контейнера зависимостей
- `Configure()` - выполняет дополнительную конфигурацию после определения привязок
- `Run()` - запускает основную логику контекста после инициализации

### RootContext

`RootContext` - абстрактный базовый класс для корневого контекста внедрения зависимостей. Предоставляет конфигурацию для емкости контейнера:

- `_capacity` - начальная емкость контейнера (по умолчанию 127)
- `_scopeCapacity` - начальная емкость для экземпляров в области видимости (по умолчанию 7)

```csharp
public sealed class GameRootContext : RootContext
{
    protected override void Bind(IDiContainer container)
    {
        // Определите здесь привязки для контейнера
    }

    protected override void Configure()
    {
        // Дополнительная конфигурация
    }

    protected override void Run()
    {
        // Основная логика после инициализации
    }
}
```

### SceneContext

`SceneContext` - абстрактный базовый класс для контекста внедрения зависимостей сцены.
Обеспечивает создание контейнера с возможностью наследования привязок от другого контекста:

- Поддерживает те же настройки емкости, что и `RootContext`
- Позволяет указать тип родительского контекста для наследования привязок
- Автоматически ищет родительский контекст при создании

```csharp
public sealed class GameSceneContext : SceneContext
{
    protected override void Bind(IDiContainer container)
    {
        // Определите здесь привязки для контейнера сцены
    }

    protected override void Configure()
    {
        // Дополнительная конфигурация
    }

    protected override void Run()
    {
        // Логика после инициализации сцены
    }
}
```

### Пользовательские реализации

Вы можете создать свой собственный тип контекста, унаследовавшись напрямую от `Context`.
Это полезно, когда вам нужна особая логика инициализации контейнера или специфическое поведение, отличное от `RootContext` и `SceneContext`:

### Конфигурация в Unity

Для настройки контекстов используются следующие параметры в инспекторе Unity:

- **Capacity**: Начальная емкость контейнера
- **Scope Capacity**: Начальная емкость для экземпляров в области видимости
- **Parent Context Type** (только для SceneContext): Тип родительского контекста для наследования привязок
